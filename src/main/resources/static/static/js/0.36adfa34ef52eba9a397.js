webpackJsonp([0],{"+Q+t":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("l/JR"),i=s("zL8q"),l={data:function(){return{delTotalNum:0,totalDataNum:0,keywords:"",newUser:"",authValue:"",newAuthValue:"",editDialogVisible:!1,addDialogVisible:!1,delUserdialog:!1,dialogVisible:!1,delMulUserDialogVisible:!1,currentName:"",currentAuth:"",userId:"",userIDList:[],oneuserIDList:[],currentPage:1,pageSize:10,options:[],userList:[]}},mounted:function(){this.getUserList(),this.getAllAuth()},methods:{clearInput:function(){this.keywords="",this.currentPage=1,this.getUserList()},saveNewUser:function(){var e=this,t={newUserName:this.newUser,auth:this.newAuthValue};Object(a.a)(t).then(function(t){console.log("新增用户res",t),1==t.data.result?(i.Message.success(t.data.msg),e.addDialogVisible=!1,e.newUser="",e.newAuthValue="",e.getUserList()):i.Message.error(t.data.msg)})},getAllAuth:function(){var e=this;Object(a.b)().then(function(t){console.log("权限res",t),1==t.data.result&&(e.options=t.data.respData)})},editUser:function(e){console.log("row",e),this.editDialogVisible=!0,this.userId=e.userId,this.authValue=e.auth,this.currentAuth=e.auth,this.currentName=e.userName},saveAsChange:function(){var e=this,t={auth:this.currentAuth,userID:this.userId};Object(a.d)(t).then(function(t){console.log("修改权限res",t),1==t.data.result?(i.Message.success(t.data.msg),e.getUserList(),e.editDialogVisible=!1):(i.Message.err,or(t.data.msg))})},delMulUserBtn:function(){this.delMulUserDialogVisible=!0},delUser:function(e){this.delUserdialog=!0,this.oneuserIDList.push(e.userId),console.log("单选删除列表",this.oneuserIDList)},handleClose:function(e){this.newUser="",this.newAuthValue="",e()},handleSizeChange:function(e){console.log("SizeChange",e),this.pageSize=e,this.getUserList()},handleCurrentChange:function(e){this.currentPage=e,this.getUserList(),console.log("用户列表当前页",this.currentPage)},countPageIndex:function(e){return(this.currentPage-1)*this.pageSize+e+1},handleSelectionChange:function(e){var t=this;this.multipleSelection=e,console.log("勾选的这一行的数据",this.multipleSelection),this.delTotalNum=this.multipleSelection.length,this.multipleSelection.forEach(function(e){t.userIDList.push(e.userId)}),console.log("勾选的删除数组",this.userIDList)},getUserList:function(){var e=this,t={keywords:this.keywords,currentPage:this.currentPage,pageSize:this.pageSize};console.log("param",t),Object(a.q)(t).then(function(t){1==t.data.result&&(e.userList=t.data.respData.dataDetail,e.totalDataNum=t.data.respData.totalDataNum,e.userList.length||1===e.currentPage||(e.currentPage-=1,e.getUserList()))})},delSure:function(){var e=this;Object(a.f)({userIDList:this.userIDList}).then(function(t){1==t.data.result?(e.userIDList=[],i.Message.success(t.data.msg),e.delMulUserDialogVisible=!1,e.getUserList()):i.Message.error(t.data.msg)})},delOneSure:function(){var e=this;Object(a.f)({userIDList:this.oneuserIDList}).then(function(t){1==t.data.result?(e.oneuserIDList=[],i.Message.success(t.data.msg),e.getUserList(),e.delUserdialog=!1):i.Message.error(t.data.msg)})},search:function(){this.currentPage=1,this.getUserList()}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"superAdmin"},[s("div",{staticClass:"top"},[s("div",{staticClass:"search"},[s("el-input",{attrs:{placeholder:"请输入搜索内容"},on:{input:e.search},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}},[s("i",{directives:[{name:"show",rawName:"v-show",value:e.keywords,expression:"keywords"}],staticClass:"el-icon-close",staticStyle:{"margin-top":"12px"},attrs:{slot:"suffix"},on:{click:e.clearInput},slot:"suffix"})])],1),e._v(" "),s("div",{staticClass:"topRight"},[s("div",{staticClass:"addUser"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("新增用户")]),e._v(" "),s("el-dialog",{attrs:{"custom-class":"addUserDialog",visible:e.addDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.addDialogVisible=t}}},[s("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.newUser,callback:function(t){e.newUser=t},expression:"newUser"}}),e._v(" "),s("el-select",{attrs:{placeholder:"请选择权限"},model:{value:e.newAuthValue,callback:function(t){e.newAuthValue=t},expression:"newAuthValue"}},e._l(e.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),s("br"),e._v(" "),s("el-button",{attrs:{type:"warning",align:"center"},on:{click:e.saveNewUser}},[e._v("保存")])],1)],1),e._v(" "),s("el-button",{staticStyle:{height:"41px","margin-left":"10px"},attrs:{size:"mini",type:"danger"},on:{click:e.delMulUserBtn}},[e._v("删除用户")]),e._v(" "),s("el-dialog",{attrs:{title:"提示",visible:e.delMulUserDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.delMulUserDialogVisible=t}}},[s("span",[e._v("确认删除"+e._s(e.delTotalNum)+"人？")]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.delSure}},[e._v("确 定")])],1)])],1)]),e._v(" "),s("el-table",{staticStyle:{width:"97%"},attrs:{data:e.userList,height:"100%",border:"",stripe:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{type:"index",index:e.countPageIndex,label:"序号",align:"center",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{prop:"userName",label:"用户名",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"auth",align:"center",label:"权限"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.editUser(t.row)}}},[e._v("修改")]),e._v(" "),s("el-dialog",{attrs:{"append-to-body":"",visible:e.editDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.editDialogVisible=t}}},[s("el-input",{attrs:{disabled:!0},model:{value:e.currentName,callback:function(t){e.currentName=t},expression:"currentName"}}),e._v(" "),s("el-select",{attrs:{placeholder:"请选择权限"},model:{value:e.currentAuth,callback:function(t){e.currentAuth=t},expression:"currentAuth"}},e._l(e.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),s("el-button",{attrs:{type:"warning",align:"center"},on:{click:e.saveAsChange}},[e._v("保存")])],1),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){return e.delUser(t.row)}}},[e._v("删除")]),e._v(" "),s("el-dialog",{attrs:{title:"提示",visible:e.delUserdialog,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.delUserdialog=t}}},[s("span",[e._v("确认删除该用户？")]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.delOneSure}},[e._v("确 定")])],1)])]}}])})],1),e._v(" "),s("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,total:e.totalDataNum,layout:"total,prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var r=s("VU/8")(l,n,!1,function(e){s("elK7")},"data-v-f809e1d2",null);t.default=r.exports},elK7:function(e,t){}});
//# sourceMappingURL=0.36adfa34ef52eba9a397.js.map