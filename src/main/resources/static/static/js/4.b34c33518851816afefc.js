webpackJsonp([4],{iKg3:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("l/JR"),i=s("zL8q"),n={data:function(){return{timer:null,loginId:0,examinerID:0,taskListPara:{keywords:"",currentPage:1,pageSize:10},totalDataNum:0,subTaskDialogVisible:!1,leaderSendTaskVisible:!1,subTaskPara:{examinerIds:"",prodModel:"",taskName:"",operatorID:""},memberOptionsValue:"",memberOptions:[],leaderSubPara:{},missionList:[],leaderSubProd:"",leaderSubTask:""}},mounted:function(){var t=this;this.timer=setInterval(function(){t.getTaskList()},1e3),this.isLeader()},methods:{isLeader:function(){this.loginId=JSON.parse(sessionStorage.getItem("auth"))},clearInput:function(){this.taskListPara.keywords="",this.taskListPara.currentPage=1,this.getTaskList()},leaderSendTaskBtn:function(t){var e=this;this.leaderSendTaskVisible=!0,console.log("派发任务row",t),this.subTaskPara.examinerIds=t.examinerIds,this.leaderSubProd=t.prodModel,this.leaderSubTask=t.taskName,Object(a.k)({leaderID:JSON.parse(sessionStorage.getItem("userID"))}).then(function(t){console.log("组员列表",t),1==t.data.result&&(e.memberOptions=t.data.respData)})},leaderSubTaskSure:function(){var t=this,e={memberId:this.memberOptionsValue,taskName:this.leaderSubTask,prodModel:this.leaderSubProd,leaderId:JSON.parse(sessionStorage.getItem("userID"))};Object(a.j)(e).then(function(e){console.log("组长派发任务res",e),1==e.data.result?(i.Message.success("任务派发成功"),t.leaderSendTaskVisible=!1):i.Message.error(e.data.msg)})},getTaskList:function(){var t=this,e={keywords:this.taskListPara.keywords,currentPage:this.taskListPara.currentPage,pageSize:this.taskListPara.pageSize,operatorID:JSON.parse(sessionStorage.getItem("userID"))};Object(a.l)(e).then(function(e){if(1==e.data.result){t.missionList=e.data.respData.dataDetail,t.totalDataNum=e.data.respData.totalDataNum;for(var s=0;s<t.missionList.length;s++)1==t.missionList[s].examinStatus?t.missionList[s].examinStatus="未检验":2==t.missionList[s].examinStatus?t.missionList[s].examinStatus="合格":3==t.missionList[s].examinStatus?t.missionList[s].examinStatus="不合格":4==t.missionList[s].examinStatus&&(t.missionList[s].examinStatus="检验中");for(var a=0;a<t.missionList.length;a++)1==t.missionList[a].taskStatus?t.missionList[a].taskStatus="未实施":2==t.missionList[a].taskStatus?t.missionList[a].taskStatus="实施中":3==t.missionList[a].taskStatus?t.missionList[a].taskStatus="已完成":4==t.missionList[a].taskStatus?t.missionList[a].taskStatus="延期":5==t.missionList[a].taskStatus?t.missionList[a].taskStatus="检验中":6==t.missionList[a].taskStatus&&(t.missionList[a].taskStatus="已终止")}})},subTaskBtn:function(t){this.subTaskDialogVisible=!0,console.log("移交row",t),this.subTaskPara.examinerIds=t.examinerIds,this.subTaskPara.prodModel=t.prodModel,this.subTaskPara.taskName=t.taskName,this.subTaskPara.operatorID=JSON.parse(sessionStorage.getItem("userID"))},subTaskSure:function(){var t=this,e={operatorID:this.subTaskPara.operatorID,examinerIds:this.subTaskPara.examinerIds,prodModel:this.subTaskPara.prodModel,taskName:this.subTaskPara.taskName};Object(a.r)(e).then(function(e){console.log("移交res",e),1==e.data.result?(i.Message.success(e.data.msg),t.subTaskDialogVisible=!1):i.Message.error(e.data.msg)})},handleClose:function(t){t(),this.memberOptionsValue=""},handleSizeChange:function(t){console.log("SizeChange",t),this.taskListPara.pageSize=t,this.getTaskList()},handleCurrentChange:function(t){console.log("CurrentPage",t),this.taskListPara.currentPage=t,this.getTaskList()},countPageIndex:function(t){return(this.taskListPara.currentPage-1)*this.taskListPara.pageSize+t+1},handleSelectionChange:function(t){this.multipleSelection=t,console.log("勾选的这一行的数据",this.multipleSelection)},search:function(){this.taskListPara.currentPage=1,this.getTaskList()}},beforeDestroy:function(){clearInterval(this.timer),this.timer=null}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"processope"},[t._m(0),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.missionList,height:"100%",border:"",stripe:"","highlight-current-row":""}},[s("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"prodModel",label:"产品型号",align:"center",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{prop:"taskName",align:"center",label:"任务名称"}}),t._v(" "),s("el-table-column",{attrs:{prop:"planDay",align:"center",label:"计划完成天数"}}),t._v(" "),s("el-table-column",{attrs:{prop:"realDay",align:"center",label:"实际耗时天数"}}),t._v(" "),s("el-table-column",{attrs:{prop:"taskStatus",align:"center",label:"任务状态"}}),t._v(" "),s("el-table-column",{attrs:{prop:"examiner",align:"center",label:"检验员"}}),t._v(" "),s("el-table-column",{attrs:{prop:"examinStatus",align:"center",label:"检验状态"}}),t._v(" "),s("el-table-column",{attrs:{prop:"taskCreatDay",align:"center",label:"任务创建日期"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{size:"mini",type:"danger",disabled:"合格"==e.row.examinStatus||"检验中"==e.row.examinStatus||"已终止"==e.row.taskStatus},on:{click:function(s){return t.subTaskBtn(e.row)}}},[t._v("移交")]),t._v(" "),s("el-dialog",{attrs:{title:"提示",visible:t.subTaskDialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.subTaskDialogVisible=e}}},[s("span",[t._v("确定移交？")]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.subTaskDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.subTaskSure}},[t._v("确 定")])],1)]),t._v(" "),3!=t.loginId||"实施中"!=e.row.taskStatus&&"不合格"!=e.row.examinStatus?t._e():s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){return t.leaderSendTaskBtn(e.row)}}},[t._v("派发任务")]),t._v(" "),s("el-dialog",{attrs:{title:"请选择组员派发任务",visible:t.leaderSendTaskVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.leaderSendTaskVisible=e}}},[s("el-select",{attrs:{placeholder:"请选择派发组员"},model:{value:t.memberOptionsValue,callback:function(e){t.memberOptionsValue=e},expression:"memberOptionsValue"}},t._l(t.memberOptions,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.leaderSendTaskVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.leaderSubTaskSure}},[t._v("派 发")])],1)],1)]}}])})],1),t._v(" "),s("el-pagination",{attrs:{background:"","current-page":t.taskListPara.currentPage,"page-size":t.taskListPara.pageSize,total:t.totalDataNum,layout:"total,prev, pager, next"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"topBtn"},[e("div",{staticClass:"search"}),this._v(" "),e("div",{staticClass:"subTaskBtn"})])}]};var o=s("VU/8")(n,r,!1,function(t){s("pxQ5")},"data-v-22470b70",null);e.default=o.exports},pxQ5:function(t,e){}});
//# sourceMappingURL=4.b34c33518851816afefc.js.map