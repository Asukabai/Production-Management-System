webpackJsonp([2],{AQVl:function(t,e){},MsQy:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("l/JR"),o=s("zL8q"),i={data:function(){return{keywords:"",currentPage:1,pageSize:5,checkSheetList:[],taskPassDialogVisible:!1,taskUnpassDialogVisible:!1,stopTaskDialogVisible:!1,totalDataNum:0,IsTaskPassPara:{operatorID:"",examinerID:"",prodModel:"",taskName:""},select_list:[],stopTaskName:"",stopProdModel:"",timer:null}},mounted:function(){var t=this;this.timer=setInterval(function(){t.sheetsListShow()},1e3)},methods:{stopTaskBtn:function(t){console.log("终止任务row",t),this.stopTaskDialogVisible=!0,this.stopProdModel=t.prodModel,this.stopTaskName=t.taskName},stopTaskSure:function(){var t=this,e={prodModel:this.stopProdModel,taskName:this.stopTaskName};Object(a.h)(e).then(function(e){console.log("终止任务res",e),1==e.data.result?(o.Message.success("任务已终止"),t.sheetsListShow(),t.stopTaskDialogVisible=!1):o.Message.error(e.data.msg)})},selectionChange:function(t){this.select_list=t},getRowKeys:function(t){return t.id},sheetsListShow:function(){var t=this,e={keywords:this.keywords,currentPage:this.currentPage,pageSize:this.pageSize,examinerID:JSON.parse(sessionStorage.getItem("userID"))};Object(a.g)(e).then(function(e){if(console.log("检验员任务单列表",e),1==e.data.result){t.checkSheetList=e.data.respData.dataDetail,t.totalDataNum=e.data.respData.totalDataNum;for(var s=0;s<t.checkSheetList.length;s++)t.checkSheetList[s].id=s,1==t.checkSheetList[s].examinStatus?t.checkSheetList[s].examinStatus="未检验":2==t.checkSheetList[s].examinStatus?t.checkSheetList[s].examinStatus="合格":3==t.checkSheetList[s].examinStatus?t.checkSheetList[s].examinStatus="不合格":4==t.checkSheetList[s].examinStatus&&(t.checkSheetList[s].examinStatus="检验中")}else t.checkSheetList=[],o.Message.error(e.data.msg)})},search:function(){this.currentPage=1,this.sheetsListShow()},clearInput:function(){this.keywords="",this.currentPage=1,this.sheetsListShow()},BornCheckSheet:function(t){console.log("检验单row",t);var e={examinerID:JSON.parse(sessionStorage.getItem("userID")),ptos:[{prodModel:t.prodModel,taskName:t.taskName,operatorIds:t.operatorIds}]};Object(a.o)(e).then(function(t){console.log("出具检验单res",t),1==t.data.result?o.Message.success(t.data.msg):o.Message.error(t.data.msg)})},taskPassBtn:function(t){console.log("合格row",t),this.taskPassDialogVisible=!0,this.IsTaskPassPara.operatorID=t.operatorID,this.IsTaskPassPara.prodModel=t.prodModel,this.IsTaskPassPara.taskName=t.taskName},taskPassSure:function(){var t=this,e={operatorID:this.IsTaskPassPara.operatorID,examinerID:JSON.parse(sessionStorage.getItem("userID")),prodModel:this.IsTaskPassPara.prodModel,taskName:this.IsTaskPassPara.taskName,examinStatus:2};Object(a.i)(e).then(function(e){console.log("合格res",e),1==e.data.result?(o.Message.success("任务已确认合格"),t.sheetsListShow(),t.taskPassDialogVisible=!1):o.Message.error(e.data.msg)})},taskUnpassBtn:function(t){console.log("不合格row",t),this.taskUnpassDialogVisible=!0,this.IsTaskPassPara.operatorID=t.operatorID,this.IsTaskPassPara.prodModel=t.prodModel,this.IsTaskPassPara.taskName=t.taskName},taskUnPassSure:function(){var t=this,e={operatorID:this.IsTaskPassPara.operatorID,examinerID:JSON.parse(sessionStorage.getItem("userID")),prodModel:this.IsTaskPassPara.prodModel,taskName:this.IsTaskPassPara.taskName,examinStatus:3};Object(a.i)(e).then(function(e){console.log("不合格res",e),1==e.data.result?(o.Message.success("任务已确认不合格"),t.sheetsListShow(),t.taskUnpassDialogVisible=!1):o.Message.error(e.data.msg)})},handleClose:function(t){t()},handleSizeChange:function(t){console.log("SizeChange",t),this.pageSize=t,this.sheetsListShow()},handleCurrentChange:function(t){console.log("CurrentPage",t),this.currentPage=t,this.sheetsListShow()},countPageIndex:function(t){return(this.currentPage-1)*this.pageSize+t+1},handleSelectionChange:function(t){this.multipleSelection=t,console.log("勾选的这一行的数据",this.multipleSelection)}},beforeDestroy:function(){clearInterval(this.timer),this.timer=null}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"processope"},[t._m(0),t._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.checkSheetList,height:"100%",border:"",stripe:"","highlight-current-row":"","row-key":t.getRowKeys},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"index",label:"序号",index:t.countPageIndex,align:"center",width:"100"}}),t._v(" "),s("el-table-column",{attrs:{prop:"prodModel",label:"产品型号",align:"center",width:"150"}}),t._v(" "),s("el-table-column",{attrs:{prop:"taskName",align:"center",label:"任务名称"}}),t._v(" "),s("el-table-column",{attrs:{prop:"operator",align:"center",label:"操作员"}}),t._v(" "),s("el-table-column",{attrs:{prop:"examinStatus",align:"center",label:"检验状态"}}),t._v(" "),s("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"primary",size:"mini",disabled:"合格"==e.row.examinStatus||"不合格"==e.row.examinStatus},on:{click:function(s){return t.taskPassBtn(e.row)}}},[t._v("合格")]),t._v(" "),s("el-dialog",{attrs:{title:"提示",visible:t.taskPassDialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.taskPassDialogVisible=e}}},[s("span",[t._v("确定合格？")]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.taskPassDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.taskPassSure}},[t._v("确 定")])],1)]),t._v(" "),s("el-button",{attrs:{type:"danger",size:"mini",disabled:"合格"==e.row.examinStatus||"不合格"==e.row.examinStatus},on:{click:function(s){return t.taskUnpassBtn(e.row)}}},[t._v("不合格")]),t._v(" "),s("el-dialog",{attrs:{title:"提示",visible:t.taskUnpassDialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.taskUnpassDialogVisible=e}}},[s("span",[t._v("确定不合格？")]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.taskUnpassDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.taskUnPassSure}},[t._v("确 定")])],1)]),t._v(" "),s("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(s){return t.stopTaskBtn(e.row)}}},[t._v("终止任务")]),t._v(" "),s("el-dialog",{attrs:{title:"提示",visible:t.stopTaskDialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.stopTaskDialogVisible=e}}},[s("span",[t._v("确定终止该任务吗？")]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.stopTaskDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.stopTaskSure}},[t._v("确 定")])],1)]),t._v(" "),s("el-button",{attrs:{type:"success",size:"mini",disabled:"未检验"==e.row.examinStatus||"检验中"==e.row.examinStatus},on:{click:function(s){return t.BornCheckSheet(e.row)}}},[t._v("出具检验单")])]}}])})],1),t._v(" "),s("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,total:t.totalDataNum,layout:"total,prev, pager, next"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"top"},[e("div",{staticClass:"search"}),this._v(" "),e("div",{staticClass:"topRight"},[e("div",{staticClass:"addUser"})])])}]};var r=s("VU/8")(i,n,!1,function(t){s("AQVl")},"data-v-b8603420",null);e.default=r.exports}});
//# sourceMappingURL=2.0b6db5d443eb4b948dfd.js.map